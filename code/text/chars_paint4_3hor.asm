;; chars_paint.asm
;; recupera el indice de acuerdo al caracter presionado
;; y lo pinta en el mismo lugar
;; 
init    equ &4000       ;; initial memory address
testkey  equ &bb1e
;;
;;
org init
run init
;; MAIN
.mainloop
     call move
     ld a,66				;; Check if ESC has been Pressed
     call &bb1e			;; Routine to Check for Key Pressed
     jr z,mainloop
     ret
ld a,a
jr $
;;
move:
   ld hl,chars		;;indice de chars
   ld e,#10
   ld a,#1b		;; P
   ld (ixa),a
   call testkey
   jp nz,call_loop
   ld a,#21		;; 9
   ld (ixa),a
   call testkey
   jp nz,call_loop
   ld a,#22		;; O
   ld (ixa),a
   call testkey
   jp nz,call_loop
ret
;;
call_loop:
   ld hl,chars
   ld a,(ixa)
   ld c,a
   ld b,#00
   ld e, #10
   call loop1
   ld (ixchar),hl	;; (char selected) index saved
   ;;ld hl, #c000
   ld hl,(ixhl)
   ld bc,(ixchar)
   ld e,#08
   call paintchar
   ld a,a
ret		
;;
paintchar:
ld a,(bc)
ld (hl),a
inc hl
inc bc
ld a,(bc)
ld (hl),a
dec hl
inc bc
ld a,#08
add a,h
ld h,a
ld (ixhl),hl
dec e
jp nz,paintchar
ret
;;
loop1:			;; 'multiply' char value by 0x10
                        ;; to get index from char
add hl,bc
dec e
jp nz,loop1
ret
;;
chars:
;; 0 (00) 0x00 (4004)
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (01) 0x01 (4004 + 10 = 4014)
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (02) 0x02 (4014 + 10 = 4024) 4004 - 4024 = 20  -> 02 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (03) 0x03 (4024 + 10 = 4034) 4004 + 30         -> 03 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (04) 0x04 (4034 + 10 = 4044) 4004 + 40         -> 04 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (05) 0x05 (4044 + 10 = 4054) 4004 + 50         -> 05 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (06) 0x06 (4054 + 10 = 4064) 4004 + 60         -> 06 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (07) 0x07 (4064 + 10 = 4074) 4004 + 70         -> 07 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (08) 0x08 (4074 + 10 = 4084) 4004 + 80         -> 08 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (09) 0x09 (4084 + 10 = 4094) 4004 + 90         -> 09 * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (10) 0x0a (4094 + 10 = 40a4) 4004 + a0         -> 0a * 10
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (11) 0x0b 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (12) 0x0c 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (13) 0x0d 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (14) 0x0e 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (15) 0x0f 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (16) 0x10 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (17) 0x11 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (18) 0x12 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (19) 0x13 
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (20) 0x14
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (21) 0x15
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (22) 0x16
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (23) 0x17
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (24) 0x18
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (25) 0x19
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (26) 0x1a
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; P (27) 0x1b
db #f0,#c0,#60,#60,#60,#60,#70,#80,#60,#00,#60,#00,#f0,#00,#00,#00
;; 0 (28) 0x1c
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (29) 0x1d
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (30) 0x1e
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (31) 0x1f
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 0 (32) 0x20
db #70,#c0,#c0,#60,#c0,#e0,#d0,#60,#e0,#60,#c0,#60,#70,#c0,#00,#00
;; 9 (33) 0x21
db #30,#c0,#60,#60,#60,#60,#30,#e0,#00,#60,#60,#60,#30,#c0,#00,#00
;; O (34) 0x22
db #30,#80,#60,#c0,#c0,#60,#c0,#60,#c0,#60,#60,#c0,#30,#80,#00,#00
;; I (35) 0x23
db #70,#e0,#10,#80,#10,#80,#10,#80,#10,#80,#10,#80,#70,#e0,#00,#00
;; L (36) 0x24
db #f0,#00,#60,#00,#60,#00,#60,#00,#60,#20,#60,#60,#f0,#e0,#00,#00
;; K (37) 0x25
db #e0,#60,#60,#60,#60,#c0,#70,#80,#60,#c0,#60,#60,#e0,#60,#00,#00
;; M (38) 0x26
db #c0,#60,#e0,#e0,#f0,#e0,#f0,#e0,#d0,#60,#c0,#60,#c0,#60,#00,#00
;; 0 (39) 0x27
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 8 (40) 0x28
db #30,#c0,#60,#60,#60,#60,#30,#c0,#60,#60,#60,#60,#30,#c0,#00,#00
;; 7 (41) 0x29
db #70,#e0,#40,#60,#00,#60,#00,#c0,#10,#80,#10,#80,#10,#80,#00,#00
;; U (42) 0x2a
db #60,#60,#60,#60,#60,#60,#60,#60,#60,#60,#60,#60,#30,#c0,#00,#00
;; Y (43) 0x2b
db #60,#60,#60,#60,#60,#60,#30,#c0,#10,#80,#10,#80,#30,#c0,#00,#00
;; H (44) 0x2c
db #60,#60,#60,#60,#60,#60,#70,#e0,#60,#60,#60,#60,#60,#60,#00,#00
;; J (45) 0x2d
db #10,#e0,#00,#c0,#00,#c0,#00,#c0,#c0,#c0,#c0,#c0,#70,#80,#00,#00
;; N (46) 0x2e
db #c0,#60,#e0,#60,#f0,#60,#d0,#e0,#c0,#e0,#c0,#60,#c0,#60,#00,#00
;; 0 (47) 0x2f
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; 6 (48) 0x30
db #30,#c0,#60,#60,#60,#00,#70,#c0,#60,#60,#60,#60,#30,#c0,#00,#00
;; 5 (49) 0x31
db #70,#e0,#60,#20,#60,#00,#30,#c0,#00,#60,#60,#60,#30,#c0,#00,#00
;; R (50) 0x32
db #f0,#c0,#60,#60,#60,#60,#70,#c0,#60,#c0,#60,#c0,#e0,#20,#00,#00
;; T (51) 0x33
db #70,#e0,#50,#a0,#10,#80,#10,#80,#10,#80,#10,#80,#30,#c0,#00,#00
;; G (52) 0x34
db #30,#c0,#60,#60,#c0,#00,#c0,#00,#c0,#e0,#c0,#60,#70,#e0,#00,#00
;; F (53) 0x35
db #f0,#e0,#60,#20,#60,#80,#70,#80,#60,#80,#60,#00,#f0,#00,#00,#00
;; B (54) 0x36
db #f0,#c0,#60,#60,#60,#60,#70,#80,#60,#60,#60,#60,#f0,#c0,#00,#00
;; V (55) 0x37
db #60,#60,#60,#60,#60,#60,#60,#60,#60,#60,#30,#c0,#10,#80,#00,#00
;; 4 (56) 0x38
db #10,#80,#30,#80,#50,#80,#90,#80,#f0,#e0,#10,#80,#30,#c0,#00,#00
;; 3 (57) 0x39
db #30,#c0,#40,#60,#00,#60,#10,#c0,#00,#60,#60,#60,#30,#c0,#00,#00
;; E (58) 0x3a
db #f0,#e0,#60,#20,#60,#80,#70,#80,#60,#80,#60,#20,#f0,#e0,#00,#00
;; W (59) 0x3b
db #c0,#60,#c0,#60,#c0,#60,#d0,#60,#f0,#e0,#e0,#e0,#c0,#60,#00,#00
;; S (60) 0x3c
db #30,#c0,#60,#60,#60,#00,#30,#c0,#00,#60,#60,#60,#30,#c0,#00,#00
;; D (61) 0x3d
db #f0,#80,#60,#c0,#60,#60,#60,#60,#60,#60,#60,#c0,#f0,#80,#00,#00
;; C (62) 0x3e
db #30,#c0,#60,#60,#c0,#00,#c0,#00,#c0,#00,#60,#60,#30,#c0,#00,#00
;; X (63) 0x3f
db #c0,#60,#60,#c0,#30,#80,#30,#80,#60,#c0,#c0,#60,#c0,#60,#00,#00
;; 1 (64) 0x40
db #10,#80,#30,#80,#10,#80,#10,#80,#10,#80,#10,#80,#70,#e0,#00,#00
;; 2 (65) 0x41
db #30,#c0,#60,#60,#00,#60,#30,#c0,#60,#00,#60,#60,#70,#e0,#00,#00
;; 0 (66) 0x42
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; Q (67) 0x43
db #30,#80,#60,#c0,#c0,#60,#c0,#60,#d0,#a0,#c0,#c0,#70,#60,#00,#00
;; 0 (68) 0x44
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; A (69) 0x45
db #10,#80,#30,#c0,#60,#60,#60,#60,#70,#e0,#60,#60,#60,#60,#00,#00
;; 0 (70) 0x46
db #00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00,#00
;; Z (71) 0x47
db #f0,#e0,#c0,#60,#80,#c0,#10,#80,#30,#20,#60,#60,#f0,#e0,#00,#00
ret
;;
ixchar:
dw #0000
ret
;;
ixhl:
dw #c000
ret
;;
ixa:
db #00
ret